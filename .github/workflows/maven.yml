name: Java CI with Maven

on:
  push:
    branches: [ "main" ] # Trigger on pushes to the 'main' branch
  pull_request:
    branches: [ "main" ] # Trigger on pull requests to the 'main' branch

jobs:
  build-and-test:
    runs-on: ubuntu-latest # Use the latest Ubuntu environment

    steps:
    # Checkout the repository code
    - name: Checkout code
      uses: actions/checkout@v4

    # Set up Java JDK 17
    - name: Set up JDK 17
      uses: actions/setup-java@v4
      with:
        java-version: '17' # Specify Java version 17
        distribution: 'temurin' # Use Temurin distribution
        cache: maven # Cache Maven dependencies

    # Verify the project directory structure
    - name: List files for debugging
      run: ls -R # Helps verify pom.xml exists in the correct location

    # Build the project with Maven
    - name: Build and Test with Maven
      run: mvn clean package -e

    # Optional: Upload the dependency graph for advanced security insights
    - name: Update dependency graph
      uses: advanced-security/maven-dependency-submission-action@v2
